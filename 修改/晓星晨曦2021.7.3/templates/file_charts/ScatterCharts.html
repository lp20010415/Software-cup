{% extends 'index.html' %}
{% block main %}
    <script>
        function drawCharts_two(XName, XAllData, i, j) {
        console.log(GetResponseData)
        console.log(datas)
        var formatterY = '{value}'
        try {
            if (GetY_ChooseItem[j].name == "客座率")
                formatterY = '{value}%'
        } catch (e) {
            if (i == 10)
                formatterY = '{value}%'
        }

        var BarCharts1 = echarts.init(document.getElementById('charts' + i),'westeros')
        var seriess = []
        console.log(i)
        if (GetX_ChooseItem.length == 10) {
            for (let k = 0; k < datas[i].length / 10; k++) {
                seriess.push(
                    {
                        name: YItemName[j],
                        type: 'effectScatter',
                            showEffectOn: 'render', //'render', 'emphasis' 高亮（hover）的时候显示特效。
                            rippleEffect: {
                                //设置涟漪动画样式
                                brushType: 'fill',//动画方式, 全填充或只有线条, 'stroke'
                                scale: '2',// 涟漪规模
                            },
                        data: [datas[i][k], datas[i][6 + k], datas[i][12 + k], datas[i][18 + k], datas[i][24 + k], datas[i][30 + k], datas[i][36 + k], datas[i][42 + k], datas[i][48 + k], datas[i][54 + k]],
                        emphasis: {
                            focus: 'series'
                        },
                        itemStyle: {
                            normal: {
                                barBorderRadius: 10,
                            },
                        },
                    },
                )
            }
        } else {
            for (let k = 0; k < datas[i].length / 20; k++) {
                seriess.push(
                    {
                        name: YItemName[j],
                        type: 'line',
                        data: [datas[j][k], datas[j][3 + k], datas[j][6 + k], datas[j][9 + k], datas[j][12 + k], datas[j][15 + k], datas[j][18 + k], datas[j][21 + k], datas[j][24 + k], datas[j][27 + k],
                            datas[j][30 + k], datas[j][33 + k], datas[j][36 + k], datas[j][39 + k], datas[j][42 + k], datas[j][45 + k], datas[j][48 + k], datas[j][51 + k], datas[j][54 + k], datas[j][57 + k]],

                        emphasis: {
                            focus: 'series'
                        },
                        itemStyle: {
                            normal: {
                                barBorderRadius: 10,
                            },
                        },
                    },
                )
            }
        }
        console.log("seriess:" + seriess)
        console.log(GetX_ChooseItem.length)
        var option = {
            title: {
                text: YItemName[j]
            },
            tooltip: {
                formatter: function (params, ticket, callback) {
                    var res = params[0].name + '<br>'
                    if (params[0].seriesName != "客座率") {
                        for (let i = 0; i < params.length; i++) {
                            res += "<span style='display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:#5470c6;'></span>" + params[i].seriesName + params[i].data + "<br/>"
                        }
                    } else {
                        for (let i = 0; i < params.length; i++) {
                            res += "<span style='display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:#5470c6;'></span>" + params[i].seriesName + params[i].data + "%<br/>"
                        }
                    }
                    return res
                },
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            legend: {
                data: [YItemName[j]]
            },
            calculable: true,
            xAxis: {
                name: GetX_ParentName,
                type: 'category',
                data: XName,
                axisLabel: {
                    rotate: 30
                }
            },
            yAxis: {
                name: YItemName[j],
                type: 'value',
                axisLine: {
                    show: true
                },
                axisLabel: {
                    show: true,
                    formatter: formatterY
                }
            },
            series: seriess
        };
        BarCharts1.setOption(option)
    }
    </script>
{% endblock %}